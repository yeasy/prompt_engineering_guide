## 4.2 分隔符与结构化表达

分隔符和结构化表达是提高提示词可读性和有效性的重要技巧。它们帮助模型更准确地区分指令、上下文、输入数据等不同部分，减少理解偏差。

### 4.2.1 分隔符的作用

分隔符像是提示词中的"标点符号"，用于：
- 明确区分不同类型的内容
- 防止用户输入与指令混淆
- 提高复杂提示词的可读性
- 便于模型识别输入数据的边界

### 4.2.2 常用分隔符类型

#### 1. 三引号和反引号

适用于包裹需要处理的文本内容。

```
请总结以下文章的主要观点：

"""
这里是需要总结的文章内容...
文章可能包含多个段落...
"""
```

```
请检查以下代码的语法错误：

```python
def hello_world()
    print("Hello, World!")
```
```

#### 2. XML/HTML 标签

结构化程度最高，特别适合 Claude 模型。

```xml
<system_context>
你是一位专业的技术文档编写人员。
</system_context>

<task>
将以下技术规格转换为用户友好的产品描述。
</task>

<input>
处理器：M3芯片，8核CPU
内存：16GB统一内存
存储：512GB SSD
</input>

<output_requirements>
- 面向普通消费者
- 强调实际使用价值
- 150-200字
</output_requirements>
```

#### 3. Markdown 标题和分隔线

使用 Markdown 格式增强可读性。

```markdown
# 任务说明

请完成客户反馈分析。

---

## 背景信息

这是一款面向年轻用户的社交App，上线3个月。

---

## 待分析数据

以下是最近一周的用户评论：
[评论内容]

---

## 输出要求

请以表格形式总结主要问题类别。
```

#### 4. 符号分隔符

使用特殊符号序列作为分隔。

```
任务：翻译并润色以下内容

###
待翻译内容：
大语言模型是一种...
###

===输出格式===
1. 直译版本
2. 润色版本
==================
```

### 4.2.3 选择分隔符的原则

#### 避免与内容冲突

选择在待处理内容中不太可能出现的分隔符。

```
❌ 可能冲突：
如果输入内容包含代码，使用 ``` 作为分隔符可能导致混淆

✓ 避免冲突：
使用 <<CODE>> ... <</CODE>> 或其他不常见的标记
```

#### 保持一致性

在同一个提示词或提示词系统中保持分隔符风格一致。

```
❌ 不一致：
"""文本1"""
<text>文本2</text>
###文本3###

✓ 一致：
<text>文本1</text>
<text>文本2</text>
<text>文本3</text>
```

#### 匹配模型偏好

不同模型对不同格式的响应可能不同：
- **Claude**：对 XML 标签响应特别好
- **GPT**：对 Markdown 和三引号响应良好
- **通用**：三引号 `"""` 是较安全的选择

### 4.2.4 结构化表达技术

#### 分节组织

将提示词按逻辑分成清晰的小节。

```markdown
## 1. 角色设定
你是一位资深的用户体验设计顾问。

## 2. 任务描述
评估一款移动App的用户界面设计。

## 3. 评估维度
- 可用性
- 一致性
- 美观性
- 可访问性

## 4. 输出格式
每个维度给出1-10分评分，并附简短说明。

## 5. 待评估内容
[App截图或描述]
```

#### 表格呈现

用表格组织成对或多维度的信息。

```markdown
请根据以下对照表翻译术语：

| 英文 | 中文翻译 | 说明 |
|------|----------|------|
| Prompt | 提示词 | AI输入 |
| Token | Token/令牌 | 保留英文或翻译 |
| Fine-tuning | 微调 | 技术术语 |

待翻译内容：
"The prompt engineering process involves..."
```

#### 编号列表

为步骤或选项使用编号，便于模型和用户理解顺序。

```
请按以下步骤处理用户请求：

1. 识别用户意图
   - 判断是询问、投诉还是建议
   
2. 提取关键信息
   - 涉及的产品或服务
   - 具体问题描述
   
3. 生成回复
   - 针对性解答
   - 提供后续行动建议
   
4. 格式化输出
   - 使用规定的回复模板
```

#### 层级缩进

用缩进表示信息的层级关系。

```
输出结构要求：
报告标题
├── 1. 执行摘要
│   ├── 背景
│   └── 主要发现
├── 2. 详细分析
│   ├── 2.1 数据概览
│   ├── 2.2 趋势分析
│   └── 2.3 异常识别
└── 3. 建议与下一步
    ├── 短期建议
    └── 长期建议
```

### 4.2.5 实战案例：提示词结构化改造

**改造前（非结构化）**：

```
我需要你帮我分析一份客户反馈，这是一份电商平台的评论数据，
主要是关于我们的蓝牙耳机产品的，我想知道用户主要关心什么，
有哪些好评点和差评点，另外能不能给我一些改进建议，
对了输出最好用中文，格式整齐一点。评论内容如下：...
```

**改造后（结构化）**：

```markdown
# 任务：电商产品评论分析

## 产品信息
- 类别：蓝牙耳机
- 平台：电商平台
- 数据类型：用户评论

## 分析维度
1. 用户关注点分布
2. 好评关键词及频率
3. 差评问题分类
4. 改进建议（优先级排序）

## 输出要求
- 语言：中文
- 格式：结构化分节输出
- 每个维度单独一节
- 使用列表和表格提高可读性

## 待分析评论

"""
[评论内容]
"""
```

### 4.2.6 安全性考虑

结构化分隔也有助于防止提示词注入攻击。

```
系统指令（用户不可见）：
你是一个客服助手。只回答与产品相关的问题。

---用户输入开始---
{user_input}
---用户输入结束---

请根据系统指令处理上述用户输入。
```

通过明确标记用户输入的边界，模型更容易区分指令和输入，减少恶意输入影响系统行为的风险。

### 4.2.7 常见问题处理

#### 问题1：分隔符被模型输出

有时模型会在回复中重复分隔符。

**解决方案**：
```
输出要求：不要在回复中包含分隔符或标签。只输出分析结果本身。
```

#### 问题2：嵌套结构过于复杂

**解决方案**：
- 简化层级，控制在3层以内
- 使用扁平化结构加上明确的编号
- 拆分为多个提示词处理

#### 问题3：分隔符在不同模型表现不同

**解决方案**：
- 测试并记录不同模型的偏好
- 建立模型-分隔符对照表
- 在代码中使用可配置的分隔符


### 思考

1. 结合您的实际业务场景，您认为 分隔符与结构化表达 最关键的应用价值体现在哪里？
